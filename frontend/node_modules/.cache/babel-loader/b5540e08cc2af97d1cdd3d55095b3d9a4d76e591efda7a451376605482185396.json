{"ast":null,"code":"import _toConsumableArray from\"D:/ecommerce/backend/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from'react';import{Link,useNavigate,useLocation,useParams}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import Message from'../components/Message';import{addToCart,removeFromCart}from'../components/actions/cartActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){var _useParams=useParams(),id=_useParams.id;var productId=id;var location=useLocation();var qty=location.search?Number(location.search.split('=')[1]):1;var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var navigate=useNavigate();var dispatch=useDispatch();useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){navigate('/shipping');};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{variant:\"info\",children:[\"Your cart is empty\",/*#__PURE__*/_jsx(Link,{className:\"px-5\",to:\"/\",children:\" Go back \"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"Rs. \",item.price]}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{className:\"bg-dark\",value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"Sub Total(\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") Items\"]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Unit Price:\"}),/*#__PURE__*/_jsxs(Col,{children:[\" Rs.\",cartItems.reduce(function(acc,item){return acc+item.price;},0)]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Quantity:\"}),/*#__PURE__*/_jsxs(Col,{children:[cartItems.reduce(function(acc,item){return acc+item.qty;},0),\" Nos\"]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total Price:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"Rs.\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]})]})}),!userInfo?/*#__PURE__*/_jsx(Link,{className:\"px-5 rm-bordor\",to:\"/login\",children:/*#__PURE__*/_jsx(Message,{variant:\"warning text-center cursor my-2 \",children:\"Please login to continue\"})}):/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})})]})});}","map":{"version":3,"names":["React","useEffect","Link","useNavigate","useLocation","useParams","useDispatch","useSelector","Row","Col","ListGroup","Image","Form","Button","Card","Message","addToCart","removeFromCart","jsx","_jsx","jsxs","_jsxs","CartScreen","_useParams","id","productId","location","qty","search","Number","split","cart","state","cartItems","userLogin","userInfo","navigate","dispatch","removeFromCartHandler","checkoutHandler","children","md","length","variant","className","to","map","item","Item","src","image","alt","name","fluid","rounded","concat","product","price","Control","as","value","onChange","e","target","_toConsumableArray","Array","countInStock","keys","x","type","onClick","reduce","acc","toFixed","disabled"],"sources":["D:/ecommerce/backend/frontend/src/pages/CartScreen.js"],"sourcesContent":["import React,{useEffect} from 'react'\r\nimport { Link, useNavigate, useLocation, useParams } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Row, Col,ListGroup,Image,Form,Button,Card } from 'react-bootstrap'\r\nimport Message from '../components/Message'\r\nimport { addToCart, removeFromCart } from '../components/actions/cartActions'\r\n\r\n\r\nexport default function CartScreen() {\r\n    const { id } = useParams();\r\n    const productId = id\r\n    const location = useLocation()\r\n    const qty = location.search ? Number(location.search.split('=')[1]) : 1\r\n    const cart = useSelector(state => state.cart)\r\n    const {cartItems} = cart\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const {userInfo} = userLogin\r\n    \r\n   \r\n    const navigate = useNavigate()\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    useEffect(() =>{\r\n        if(productId){\r\n            dispatch(addToCart(productId, qty))\r\n        }\r\n\r\n    },[dispatch, productId, qty])\r\n\r\n\r\n    const removeFromCartHandler = (id) =>{\r\n\r\n        dispatch(removeFromCart(id))\r\n\r\n\r\n    }\r\n\r\n    const checkoutHandler = () =>{\r\n        navigate('/shipping')\r\n\r\n    }\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n        <Row >\r\n            <Col md={8}>\r\n            <h2>Shopping Cart</h2>\r\n            {cartItems.length === 0 ? (\r\n                <Message variant='info'>Your cart is empty\r\n                    <Link className='px-5' to = '/'> Go back </Link>\r\n                </Message>\r\n            ):(\r\n                <ListGroup variant='flush'>\r\n                    {cartItems.map(item =>(\r\n                        <ListGroup.Item key={item.product}>\r\n                          <Row>\r\n                            <Col md={2}>\r\n                                <Image src={item.image} alt={item.name} fluid rounded/>\r\n                            </Col>\r\n                             \r\n                            <Col md={3}>\r\n                            <Link to ={`/product/${item.product}`}>{item.name}</Link>\r\n                            </Col>\r\n                            \r\n                            <Col md={2}>\r\n                                Rs. {item.price}\r\n\r\n                            </Col >\r\n\r\n                            <Col md={3}>\r\n\r\n                            <Form.Control as='select' \r\n                            value={item.qty} \r\n                            onChange={(e) =>dispatch(addToCart(item.product, Number(e.target.value)))} >\r\n                                     {\r\n\r\n                                            [...Array(item.countInStock).keys()].map((x)=>(\r\n                                            <option className='bg-dark' key={x+1} value={x+1}>{x+1}</option>\r\n                                            ))\r\n                                    }\r\n                             </Form.Control>\r\n\r\n                            </Col>\r\n\r\n                            <Col md={1}>\r\n                                <Button type='button' variant='light'\r\n                                onClick={()=> removeFromCartHandler(item.product)}\r\n                                \r\n                                >\r\n                                    <i className='fas fa-trash'></i>\r\n\r\n                                </Button>\r\n                            </Col>\r\n\r\n                          </Row>\r\n                        </ListGroup.Item>\r\n\r\n                    ))}\r\n\r\n                </ListGroup>\r\n            )}\r\n            </Col>\r\n\r\n            <Col md={4}>\r\n            <Card>\r\n                <ListGroup variant='flush'>\r\n                    <ListGroup.Item>\r\n                        <h2>Sub Total({cartItems.reduce((acc,item) => acc + item.qty, 0)}) Items</h2>\r\n                    </ListGroup.Item>\r\n\r\n                    <ListGroup.Item>\r\n                        <Row>\r\n                            <Col>Unit Price:</Col>\r\n                            <Col> Rs.{cartItems.reduce((acc,item) => acc + item.price, 0)}</Col>\r\n                        </Row>\r\n                    </ListGroup.Item>\r\n\r\n                    <ListGroup.Item>\r\n                        <Row>\r\n                            <Col>Quantity:</Col>\r\n                            <Col>{cartItems.reduce((acc,item) => acc + item.qty, 0)} Nos</Col>\r\n                        </Row>\r\n                    </ListGroup.Item>\r\n\r\n                    <ListGroup.Item>\r\n                        <Row>\r\n                            <Col>Total Price:</Col>\r\n                            <Col>Rs.{cartItems.reduce((acc,item) => acc + item.qty * item.price, 0).toFixed(2)}</Col>\r\n                        </Row>\r\n                    </ListGroup.Item>\r\n                   \r\n\r\n                    {!userInfo ? (<Link className='px-5 rm-bordor' to = '/login'>\r\n                    <Message variant='warning text-center cursor my-2 ' >Please login to continue</Message>\r\n                    </Link> \r\n                    ):(\r\n\r\n                     <ListGroup.Item>\r\n                        <Button type='button'\r\n                         className='btn-block'\r\n                         disabled={cartItems.length === 0}\r\n                         onClick={checkoutHandler}\r\n                         >\r\n\r\n                          Proceed To Checkout\r\n                        </Button>\r\n                    </ListGroup.Item>\r\n                    )}\r\n                    </ListGroup>\r\n                   </Card>\r\n\r\n            </Col>\r\n        </Row>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"2HAAA,MAAO,CAAAA,KAAK,EAAEC,SAAS,KAAO,OAAO,CACrC,OAASC,IAAI,CAAEC,WAAW,CAAEC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CAC5E,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,GAAG,CAAEC,GAAG,CAACC,SAAS,CAACC,KAAK,CAACC,IAAI,CAACC,MAAM,CAACC,IAAI,KAAQ,iBAAiB,CAC3E,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAC3C,OAASC,SAAS,CAAEC,cAAc,KAAQ,mCAAmC,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAG7E,cAAe,SAAS,CAAAC,UAAUA,CAAA,CAAG,CACjC,IAAAC,UAAA,CAAelB,SAAS,CAAC,CAAC,CAAlBmB,EAAE,CAAAD,UAAA,CAAFC,EAAE,CACV,GAAM,CAAAC,SAAS,CAAGD,EAAE,CACpB,GAAM,CAAAE,QAAQ,CAAGtB,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAuB,GAAG,CAAGD,QAAQ,CAACE,MAAM,CAAGC,MAAM,CAACH,QAAQ,CAACE,MAAM,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAG,CAAC,CACvE,GAAM,CAAAC,IAAI,CAAGxB,WAAW,CAAC,SAAAyB,KAAK,QAAI,CAAAA,KAAK,CAACD,IAAI,GAAC,CAC7C,GAAO,CAAAE,SAAS,CAAIF,IAAI,CAAjBE,SAAS,CAEhB,GAAM,CAAAC,SAAS,CAAG3B,WAAW,CAAC,SAAAyB,KAAK,QAAI,CAAAA,KAAK,CAACE,SAAS,GAAC,CACvD,GAAO,CAAAC,QAAQ,CAAID,SAAS,CAArBC,QAAQ,CAGf,GAAM,CAAAC,QAAQ,CAAGjC,WAAW,CAAC,CAAC,CAE9B,GAAM,CAAAkC,QAAQ,CAAG/B,WAAW,CAAC,CAAC,CAE9BL,SAAS,CAAC,UAAK,CACX,GAAGwB,SAAS,CAAC,CACTY,QAAQ,CAACrB,SAAS,CAACS,SAAS,CAAEE,GAAG,CAAC,CAAC,CACvC,CAEJ,CAAC,CAAC,CAACU,QAAQ,CAAEZ,SAAS,CAAEE,GAAG,CAAC,CAAC,CAG7B,GAAM,CAAAW,qBAAqB,CAAG,QAAxB,CAAAA,qBAAqBA,CAAId,EAAE,CAAI,CAEjCa,QAAQ,CAACpB,cAAc,CAACO,EAAE,CAAC,CAAC,CAGhC,CAAC,CAED,GAAM,CAAAe,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAA,CAAQ,CACzBH,QAAQ,CAAC,WAAW,CAAC,CAEzB,CAAC,CAIH,mBACEjB,IAAA,QAAAqB,QAAA,cACInB,KAAA,CAACb,GAAG,EAAAgC,QAAA,eACAnB,KAAA,CAACZ,GAAG,EAACgC,EAAE,CAAE,CAAE,CAAAD,QAAA,eACXrB,IAAA,OAAAqB,QAAA,CAAI,eAAa,CAAI,CAAC,CACrBP,SAAS,CAACS,MAAM,GAAK,CAAC,cACnBrB,KAAA,CAACN,OAAO,EAAC4B,OAAO,CAAC,MAAM,CAAAH,QAAA,EAAC,oBACpB,cAAArB,IAAA,CAACjB,IAAI,EAAC0C,SAAS,CAAC,MAAM,CAACC,EAAE,CAAG,GAAG,CAAAL,QAAA,CAAC,WAAS,CAAM,CAAC,EAC3C,CAAC,cAEVrB,IAAA,CAACT,SAAS,EAACiC,OAAO,CAAC,OAAO,CAAAH,QAAA,CACrBP,SAAS,CAACa,GAAG,CAAC,SAAAC,IAAI,qBACf5B,IAAA,CAACT,SAAS,CAACsC,IAAI,EAAAR,QAAA,cACbnB,KAAA,CAACb,GAAG,EAAAgC,QAAA,eACFrB,IAAA,CAACV,GAAG,EAACgC,EAAE,CAAE,CAAE,CAAAD,QAAA,cACPrB,IAAA,CAACR,KAAK,EAACsC,GAAG,CAAEF,IAAI,CAACG,KAAM,CAACC,GAAG,CAAEJ,IAAI,CAACK,IAAK,CAACC,KAAK,MAACC,OAAO,MAAC,CAAC,CACtD,CAAC,cAENnC,IAAA,CAACV,GAAG,EAACgC,EAAE,CAAE,CAAE,CAAAD,QAAA,cACXrB,IAAA,CAACjB,IAAI,EAAC2C,EAAE,aAAAU,MAAA,CAAeR,IAAI,CAACS,OAAO,CAAG,CAAAhB,QAAA,CAAEO,IAAI,CAACK,IAAI,CAAO,CAAC,CACpD,CAAC,cAEN/B,KAAA,CAACZ,GAAG,EAACgC,EAAE,CAAE,CAAE,CAAAD,QAAA,EAAC,MACJ,CAACO,IAAI,CAACU,KAAK,EAEb,CAAC,cAEPtC,IAAA,CAACV,GAAG,EAACgC,EAAE,CAAE,CAAE,CAAAD,QAAA,cAEXrB,IAAA,CAACP,IAAI,CAAC8C,OAAO,EAACC,EAAE,CAAC,QAAQ,CACzBC,KAAK,CAAEb,IAAI,CAACpB,GAAI,CAChBkC,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAI,CAAAzB,QAAQ,CAACrB,SAAS,CAAC+B,IAAI,CAACS,OAAO,CAAE3B,MAAM,CAACiC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAAC,CAAC,EAAC,CAAApB,QAAA,CAG1DwB,kBAAA,CAAIC,KAAK,CAAClB,IAAI,CAACmB,YAAY,CAAC,CAACC,IAAI,CAAC,CAAC,EAAErB,GAAG,CAAC,SAACsB,CAAC,qBAC3CjD,IAAA,WAAQyB,SAAS,CAAC,SAAS,CAAWgB,KAAK,CAAEQ,CAAC,CAAC,CAAE,CAAA5B,QAAA,CAAE4B,CAAC,CAAC,CAAC,EAArBA,CAAC,CAAC,CAA4B,CAAC,EAC/D,CAAC,CAEH,CAAC,CAEX,CAAC,cAENjD,IAAA,CAACV,GAAG,EAACgC,EAAE,CAAE,CAAE,CAAAD,QAAA,cACPrB,IAAA,CAACN,MAAM,EAACwD,IAAI,CAAC,QAAQ,CAAC1B,OAAO,CAAC,OAAO,CACrC2B,OAAO,CAAE,SAAAA,QAAA,QAAK,CAAAhC,qBAAqB,CAACS,IAAI,CAACS,OAAO,CAAC,EAAC,CAAAhB,QAAA,cAG9CrB,IAAA,MAAGyB,SAAS,CAAC,cAAc,CAAI,CAAC,CAE5B,CAAC,CACR,CAAC,EAEH,CAAC,EAxCaG,IAAI,CAACS,OAyCV,CAAC,EAEpB,CAAC,CAEK,CACd,EACI,CAAC,cAENrC,IAAA,CAACV,GAAG,EAACgC,EAAE,CAAE,CAAE,CAAAD,QAAA,cACXrB,IAAA,CAACL,IAAI,EAAA0B,QAAA,cACDnB,KAAA,CAACX,SAAS,EAACiC,OAAO,CAAC,OAAO,CAAAH,QAAA,eACtBrB,IAAA,CAACT,SAAS,CAACsC,IAAI,EAAAR,QAAA,cACXnB,KAAA,OAAAmB,QAAA,EAAI,YAAU,CAACP,SAAS,CAACsC,MAAM,CAAC,SAACC,GAAG,CAACzB,IAAI,QAAK,CAAAyB,GAAG,CAAGzB,IAAI,CAACpB,GAAG,GAAE,CAAC,CAAC,CAAC,SAAO,EAAI,CAAC,CACjE,CAAC,cAEjBR,IAAA,CAACT,SAAS,CAACsC,IAAI,EAAAR,QAAA,cACXnB,KAAA,CAACb,GAAG,EAAAgC,QAAA,eACArB,IAAA,CAACV,GAAG,EAAA+B,QAAA,CAAC,aAAW,CAAK,CAAC,cACtBnB,KAAA,CAACZ,GAAG,EAAA+B,QAAA,EAAC,MAAI,CAACP,SAAS,CAACsC,MAAM,CAAC,SAACC,GAAG,CAACzB,IAAI,QAAK,CAAAyB,GAAG,CAAGzB,IAAI,CAACU,KAAK,GAAE,CAAC,CAAC,EAAM,CAAC,EACnE,CAAC,CACM,CAAC,cAEjBtC,IAAA,CAACT,SAAS,CAACsC,IAAI,EAAAR,QAAA,cACXnB,KAAA,CAACb,GAAG,EAAAgC,QAAA,eACArB,IAAA,CAACV,GAAG,EAAA+B,QAAA,CAAC,WAAS,CAAK,CAAC,cACpBnB,KAAA,CAACZ,GAAG,EAAA+B,QAAA,EAAEP,SAAS,CAACsC,MAAM,CAAC,SAACC,GAAG,CAACzB,IAAI,QAAK,CAAAyB,GAAG,CAAGzB,IAAI,CAACpB,GAAG,GAAE,CAAC,CAAC,CAAC,MAAI,EAAK,CAAC,EACjE,CAAC,CACM,CAAC,cAEjBR,IAAA,CAACT,SAAS,CAACsC,IAAI,EAAAR,QAAA,cACXnB,KAAA,CAACb,GAAG,EAAAgC,QAAA,eACArB,IAAA,CAACV,GAAG,EAAA+B,QAAA,CAAC,cAAY,CAAK,CAAC,cACvBnB,KAAA,CAACZ,GAAG,EAAA+B,QAAA,EAAC,KAAG,CAACP,SAAS,CAACsC,MAAM,CAAC,SAACC,GAAG,CAACzB,IAAI,QAAK,CAAAyB,GAAG,CAAGzB,IAAI,CAACpB,GAAG,CAAGoB,IAAI,CAACU,KAAK,GAAE,CAAC,CAAC,CAACgB,OAAO,CAAC,CAAC,CAAC,EAAM,CAAC,EACxF,CAAC,CACM,CAAC,CAGhB,CAACtC,QAAQ,cAAIhB,IAAA,CAACjB,IAAI,EAAC0C,SAAS,CAAC,gBAAgB,CAACC,EAAE,CAAG,QAAQ,CAAAL,QAAA,cAC5DrB,IAAA,CAACJ,OAAO,EAAC4B,OAAO,CAAC,kCAAkC,CAAAH,QAAA,CAAE,0BAAwB,CAAS,CAAC,CACjF,CAAC,cAGNrB,IAAA,CAACT,SAAS,CAACsC,IAAI,EAAAR,QAAA,cACZrB,IAAA,CAACN,MAAM,EAACwD,IAAI,CAAC,QAAQ,CACpBzB,SAAS,CAAC,WAAW,CACrB8B,QAAQ,CAAEzC,SAAS,CAACS,MAAM,GAAK,CAAE,CACjC4B,OAAO,CAAE/B,eAAgB,CAAAC,QAAA,CACxB,qBAGF,CAAQ,CAAC,CACG,CACf,EACU,CAAC,CACP,CAAC,CAET,CAAC,EACL,CAAC,CACL,CAAC,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}