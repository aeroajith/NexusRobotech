{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import swal from'sweetalert';import{Table,Button,Row,Col}from'react-bootstrap';import Loader from\"../components/Loader\";import Message from\"../components/Message\";import Paginate from'../components/Paginate';import{useDispatch,useSelector}from'react-redux';import{useNavigate,useLocation}from\"react-router-dom\";import{listProducts,deleteProduct,createProduct}from'../components/actions/productAction';import{PRODUCT_CREATE_RESET}from'../components/constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductListPage(){var dispatch=useDispatch();var navigate=useNavigate();var location=useLocation();var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products,pages=productList.pages,page=productList.page;var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var keyword=location.search;useEffect(function(){dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo.isAdmin){navigate('/login');}if(successCreate){navigate(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts(keyword));}},[dispatch,navigate,userInfo,successDelete,successCreate,createdProduct,keyword]);var deleteHandler=function deleteHandler(id){//pop up\nswal({title:\"Are you sure want to delete?\",text:\"You will not able to recover this product!\",icon:\"warning\",buttons:true,dangerMode:true}).then(function(willDelete){if(willDelete){swal(\"Poof! Product has been successfully deleted!\",{icon:\"success\"});dispatch(deleteProduct(id));}else{swal(\"Product is safe!\");}});};var createProductHandler=function createProductHandler(){dispatch(createProduct());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{className:\"text-right\"}),/*#__PURE__*/_jsxs(Button,{className:\"my-3\",onClick:createProductHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" Create Product\"]})]}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),/*#__PURE__*/_jsx(\"h2\",{children:\"Product List\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BRAND\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"Rs.\",product.price]}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.brand}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),\"\",/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:function onClick(){return deleteHandler(product._id);},className:\"btn-sm mx-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},product._id);})})]}),/*#__PURE__*/_jsx(Paginate,{pages:pages,page:page,isAdmin:true})]})]});}","map":{"version":3,"names":["React","useEffect","LinkContainer","swal","Table","Button","Row","Col","Loader","Message","Paginate","useDispatch","useSelector","useNavigate","useLocation","listProducts","deleteProduct","createProduct","PRODUCT_CREATE_RESET","jsx","_jsx","jsxs","_jsxs","ProductListPage","dispatch","navigate","location","productList","state","loading","error","products","pages","page","productCreate","loadingCreate","errorCreate","successCreate","success","createdProduct","product","productDelete","loadingDelete","errorDelete","successDelete","userLogin","userInfo","keyword","search","type","isAdmin","concat","_id","deleteHandler","id","title","text","icon","buttons","dangerMode","then","willDelete","createProductHandler","children","className","onClick","variant","striped","bordered","hover","responsive","map","name","price","category","brand","to"],"sources":["D:/ecommerce/backend/frontend/src/pages/ProductListPage.js"],"sourcesContent":["import React,{useEffect} from 'react'\r\nimport {LinkContainer} from 'react-router-bootstrap'\r\nimport swal from 'sweetalert'\r\nimport { Table,Button,Row,Col } from 'react-bootstrap'\r\nimport Loader from \"../components/Loader\"\r\nimport Message from \"../components/Message\"\r\nimport Paginate from '../components/Paginate'\r\nimport { useDispatch,useSelector } from 'react-redux'\r\nimport { useNavigate, useLocation } from \"react-router-dom\"\r\nimport { listProducts,deleteProduct,createProduct } from '../components/actions/productAction'\r\nimport { PRODUCT_CREATE_RESET } from '../components/constants/productConstants'\r\n\r\nexport default function ProductListPage() {\r\n    const dispatch = useDispatch()\r\n    const navigate = useNavigate()\r\n    const location = useLocation()\r\n\r\n    const productList = useSelector(state =>state.productList)\r\n    const {loading,error,products,pages,page} = productList\r\n\r\n    const productCreate = useSelector(state =>state.productCreate)\r\n    const {loading:loadingCreate,error:errorCreate,success:successCreate, product:createdProduct} = productCreate\r\n    \r\n    const productDelete = useSelector(state =>state.productDelete)\r\n    const {loading:loadingDelete,error:errorDelete,success:successDelete} = productDelete\r\n\r\n    const userLogin = useSelector(state =>state.userLogin)\r\n    const {userInfo} = userLogin\r\n\r\n    \r\n    let keyword = location.search\r\n\r\n\r\n    useEffect(()=>{\r\n        dispatch({type:PRODUCT_CREATE_RESET})\r\n        if(! userInfo.isAdmin){\r\n            navigate('/login')\r\n        }\r\n\r\n        if(successCreate){\r\n            navigate(`/admin/product/${createdProduct._id}/edit`)\r\n        }else{\r\n            dispatch(listProducts(keyword))\r\n        }\r\n\r\n    },[dispatch,navigate,userInfo,successDelete,successCreate,createdProduct,keyword])\r\n\r\n    const deleteHandler =(id) =>{\r\n        //pop up\r\n        swal({\r\n            title: \"Are you sure want to delete?\",\r\n            text: \"You will not able to recover this product!\", \r\n            icon: \"warning\",\r\n            buttons: true,\r\n            dangerMode: true,\r\n        })\r\n        .then((willDelete) => {\r\n          if (willDelete) {\r\n            swal(\"Poof! Product has been successfully deleted!\", {\r\n              icon: \"success\",\r\n            });\r\n            dispatch(deleteProduct(id))\r\n           \r\n          } else {\r\n            swal(\"Product is safe!\");\r\n         } })\r\n        }\r\n    const createProductHandler=() =>{\r\n        dispatch(createProduct())\r\n\r\n\r\n    }\r\n\r\n  return (\r\n    <div>\r\n        <Row className='align-items-center'>\r\n            \r\n            <Col className='text-right'></Col>\r\n            <Button className='my-3' onClick={createProductHandler}><i className='fas fa-plus'></i> Create Product</Button>\r\n        </Row>\r\n        {loadingCreate && <Loader/>}\r\n        {errorCreate && <Message variant='danger'>{errorCreate}</Message>}\r\n\r\n        {loadingDelete && <Loader/>}\r\n        {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\r\n\r\n\r\n        <h2>Product List</h2> \r\n        {loading ?( <Loader/> ):error ?( <Message variant='danger'>{error}</Message>)\r\n\r\n        :( <div>\r\n            <Table striped bordered hover responsive className='table-sm'>\r\n                <thead>\r\n                    <tr>\r\n                    <th>ID</th>\r\n                    <th>NAME</th>\r\n                    <th>PRICE</th>\r\n                    <th>CATEGORY</th>\r\n                    <th>BRAND</th>\r\n                    <th></th>\r\n                    </tr>\r\n                    \r\n                </thead>\r\n\r\n                <tbody>\r\n                    {products.map(product=>(\r\n                        <tr key={product._id}>\r\n                        <td>{product._id}</td>\r\n                        <td>{product.name}</td>\r\n                        <td>Rs.{product.price}</td>\r\n                        <td>{product.category}</td>\r\n                        <td>{product.brand}</td>\r\n                       \r\n\r\n                        <td>\r\n                            <LinkContainer to={`/admin/product/${product._id}/edit`}>\r\n                                <Button variant='light' className='btn-sm'>\r\n                                    <i className='fas fa-edit'></i>\r\n                                    </Button>\r\n                            </LinkContainer>\r\n                            {\"\"}\r\n                            <Button variant='danger'\r\n                            onClick={()=> deleteHandler(product._id)}\r\n                            className='btn-sm mx-2'>\r\n                                    <i className='fas fa-trash'></i>\r\n                                    </Button>\r\n                        </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n\r\n            </Table>\r\n            <Paginate pages={pages} page={page} isAdmin={true} />\r\n            </div>\r\n        )}\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}